@using Maroik.WebSite.Models.ViewModels.Calendar
@using Maroik.WebSite.Utilities
@using Maroik.Common.Miscellaneous.Utilities
@using Newtonsoft.Json
@using System.Text
@model CalendarOutputViewModel

@{
    Account loginedAccount = new Account() { Role = Role.Anonymous, TimeZoneIanaId = "UTC" };

    #region Set Time
    DateTime currentTime = DateTime.UtcNow.ConvertTimeByTimeZoneIanaId(loginedAccount.TimeZoneIanaId);
    string currentDate = currentTime.ToString("yyyy-MM-dd");
    int currentHour = currentTime.Hour;
    int currentMinute = currentTime.Minute;
    int currentSecond = currentTime.Second;

    // Create a list to store the time intervals
    List<string> timeIntervals = new List<string>();

    // Generate the time intervals
    for (int hour = 0; hour < 24; hour++)
    {
        for (int minute = 0; minute < 60; minute += 15)
        {
            timeIntervals.Add($"{hour:D2}:{minute:D2}");
        }
    }

    // Find the nearest 15-minute interval
    int nearestMinute = (int)Math.Round(currentMinute / 15.0) * 15;
    if (nearestMinute == 60)
    {
        currentTime = currentTime.AddHours(1);
        nearestMinute = 0;
    }
    string currentInterval = $"{currentTime.Hour:D2}:{nearestMinute:D2}";
    #endregion
}

@Html.Hidden("localizerEmail", localizer["Email"].Value)
@Html.Hidden("localizerNotification", localizer["Notification"].Value)
@Html.Hidden("localizerMinutes", localizer["Minutes"].Value)
@Html.Hidden("localizerHours", localizer["Hours"].Value)
@Html.Hidden("localizerDays", localizer["Days"].Value)
@Html.Hidden("localizerWeeks", localizer["Weeks"].Value)
@Html.Hidden("localizerBeforeAt", localizer["BeforeAt"].Value)
@Html.Hidden("localizerPrevText", localizer["PrevText"].Value)
@Html.Hidden("localizerNextText", localizer["NextText"].Value)
@Html.Hidden("localizerJanuary", localizer["January"].Value)
@Html.Hidden("localizerFebruary", localizer["February"].Value)
@Html.Hidden("localizerMarch", localizer["March"].Value)
@Html.Hidden("localizerApril", localizer["April"].Value)
@Html.Hidden("localizerMay", localizer["May"].Value)
@Html.Hidden("localizerJune", localizer["June"].Value)
@Html.Hidden("localizerJuly", localizer["July"].Value)
@Html.Hidden("localizerAugust", localizer["August"].Value)
@Html.Hidden("localizerSeptember", localizer["September"].Value)
@Html.Hidden("localizerOctober", localizer["October"].Value)
@Html.Hidden("localizerNovember", localizer["November"].Value)
@Html.Hidden("localizerDecember", localizer["December"].Value)
@Html.Hidden("localizerJan", localizer["Jan"].Value)
@Html.Hidden("localizerFeb", localizer["Feb"].Value)
@Html.Hidden("localizerMar", localizer["Mar"].Value)
@Html.Hidden("localizerApr", localizer["Apr"].Value)
@Html.Hidden("localizerJun", localizer["Jun"].Value)
@Html.Hidden("localizerJul", localizer["Jul"].Value)
@Html.Hidden("localizerAug", localizer["Aug"].Value)
@Html.Hidden("localizerSep", localizer["Sep"].Value)
@Html.Hidden("localizerOct", localizer["Oct"].Value)
@Html.Hidden("localizerNov", localizer["Nov"].Value)
@Html.Hidden("localizerDec", localizer["Dec"].Value)
@Html.Hidden("localizerSunday", localizer["Sunday"].Value)
@Html.Hidden("localizerMonday", localizer["Monday"].Value)
@Html.Hidden("localizerTuesday", localizer["Tuesday"].Value)
@Html.Hidden("localizerWednesday", localizer["Wednesday"].Value)
@Html.Hidden("localizerThursday", localizer["Thursday"].Value)
@Html.Hidden("localizerFriday", localizer["Friday"].Value)
@Html.Hidden("localizerSaturday", localizer["Saturday"].Value)
@Html.Hidden("localizerSun", localizer["Sun"].Value)
@Html.Hidden("localizerMon", localizer["Mon"].Value)
@Html.Hidden("localizerTue", localizer["Tue"].Value)
@Html.Hidden("localizerWed", localizer["Wed"].Value)
@Html.Hidden("localizerThu", localizer["Thu"].Value)
@Html.Hidden("localizerFri", localizer["Fri"].Value)
@Html.Hidden("localizerSat", localizer["Sat"].Value)
@Html.Hidden("localizerSu", localizer["Su"].Value)
@Html.Hidden("localizerMo", localizer["Mo"].Value)
@Html.Hidden("localizerTu", localizer["Tu"].Value)
@Html.Hidden("localizerWe", localizer["We"].Value)
@Html.Hidden("localizerTh", localizer["Th"].Value)
@Html.Hidden("localizerFr", localizer["Fr"].Value)
@Html.Hidden("localizerSa", localizer["Sa"].Value)
@Html.Hidden("localizerYearSuffix", localizer["YearSuffix"]?.Value ?? "")
@Html.Hidden("localizerIETFLanguageTag", localizer["IETFLanguageTag"].Value)
@Html.Hidden("localizerPrev", localizer["Prev"].Value)
@Html.Hidden("localizerNext", localizer["Next"].Value)
@Html.Hidden("localizerPrevYear", localizer["PrevYear"].Value)
@Html.Hidden("localizerNextYear", localizer["NextYear"].Value)
@Html.Hidden("localizerToday", localizer["Today"].Value)
@Html.Hidden("localizerMonth", localizer["Month"].Value)
@Html.Hidden("localizerWeek", localizer["Week"].Value)
@Html.Hidden("localizerDay", localizer["Day"].Value)
@Html.Hidden("localizerList", localizer["List"].Value)
@Html.Hidden("localizerDayGridMonth", localizer["DayGridMonth"].Value)
@Html.Hidden("localizerDayGridWeek", localizer["DayGridWeek"].Value)
@Html.Hidden("localizerDayGridDay", localizer["DayGridDay"].Value)
@Html.Hidden("localizerTimeGridWeek", localizer["TimeGridWeek"].Value)
@Html.Hidden("localizerTimeGridDay", localizer["TimeGridDay"].Value)
@Html.Hidden("localizerListYear", localizer["ListYear"].Value)
@Html.Hidden("localizerListMonth", localizer["ListMonth"].Value)
@Html.Hidden("localizerListWeek", localizer["ListWeek"].Value)
@Html.Hidden("localizerListDay", localizer["ListDay"].Value)
@Html.Hidden("localizerConfirmDelete", localizer["ConfirmDelete"].Value)
@Html.Hidden("localizerThisFieldRequired", localizer["ThisFieldRequired"].Value)
@Html.Hidden("localizerErrorInvalidNumber", localizer["ErrorInvalidNumber"].Value)
@Html.Hidden("localizerErrorRangeMinute", localizer["ErrorRangeMinute"].Value)
@Html.Hidden("localizerErrorRangeHour", localizer["ErrorRangeHour"].Value)
@Html.Hidden("localizerErrorRangeDay", localizer["ErrorRangeDay"].Value)
@Html.Hidden("localizerErrorRangeWeek", localizer["ErrorRangeWeek"].Value)
@Html.Hidden("otherCalendarEventOutputViewModels", JsonConvert.SerializeObject(Model.OtherCalendarEventOutputViewModels))

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="sticky-top mb-3">
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 class="card-title">@localizer["Other calendars"]</h4>
                        </div>
                        <div class="card-body">
                            <div id="otherCalendars">
                                @foreach (Calendar otherCalendar in Model.OtherCalendars)
                                {
                                    <label id="@($"lblOtherCalendar{otherCalendar.Id}")" style="position: relative; border:1px solid #ccc; padding:10px; margin:0 0 10px; display:block">
                                        <input type="checkbox" class="chkOtherCalendar" style="accent-color:@otherCalendar.HtmlColorCode" checked />
                                        <label style="padding-left:0.3em;">@otherCalendar.Name</label>
                                    </label>
                                }
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-md-9">
                <div class="card card-primary">
                    <div class="card-body p-0">
                        <div id="calendar"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@*<!--calendarEventPopup-->*@
<div id="calendarEventPopup" class="event-popup" style="display: none; position: absolute;">
    <div class="popup-header">
        <h5 id="calendarEventPopupTitle"></h5>
        <button type="button" id="closeCalendarEventPopup">&times;</button>
    </div>
    <div id="divCalendarEventPopupAllDayChecked" class="popup-body" style="display:none;">
        <p><strong>@localizer["StartDate"].Value:</strong> <span id="calendarEventPopupStartAllDayChecked"></span></p>
        <p><strong>@localizer["EndDate"].Value:</strong> <span id="calendarEventPopupEndAllDayChecked"></span></p>
    </div>
    <div id="divCalendarEventPopupAllDayUnchecked" class="popup-body" style="display:none;">
        <p><strong>@localizer["StartDate"].Value:</strong> <span id="calendarEventPopupStartAllDayUnchecked"></span></p>
        <p><span id="calendarEventPopupStartTimeZoneAllDayUnchecked"></span></p>
        <p><strong>@localizer["EndDate"].Value:</strong> <span id="calendarEventPopupEndAllDayUnchecked"></span></p>
        <p><span id="calendarEventPopupEndTimeZoneAllDayUnchecked"></span></p>
    </div>
    <div class="popup-footer">
        <button id="editCalendarEventPopup" class="btn btn-primary btn-sm">@localizer["Edit"].Value</button>
        <button id="deleteCalendarEventPopup" class="btn btn-danger btn-sm">@localizer["Delete"].Value</button>
    </div>
</div>

@*<!--otherCalendarEventPopup-->*@
<div id="otherCalendarEventPopup" class="event-popup" style="display: none; position: absolute;">
    <div class="popup-header">
        <h5 id="otherCalendarEventPopupTitle"></h5>
        <button type="button" id="closeOtherCalendarEventPopup">&times;</button>
    </div>
    <div id="divOtherCalendarEventPopupAllDayChecked" class="popup-body" style="display:none;">
        <p><strong>@localizer["StartDate"].Value:</strong> <span id="otherCalendarEventPopupStartAllDayChecked"></span></p>
        <p><strong>@localizer["EndDate"].Value:</strong> <span id="otherCalendarEventPopupEndAllDayChecked"></span></p>
    </div>
    <div id="divOtherCalendarEventPopupAllDayUnchecked" class="popup-body" style="display:none;">
        <p><strong>@localizer["StartDate"].Value:</strong> <span id="otherCalendarEventPopupStartAllDayUnchecked"></span></p>
        <p><span id="otherCalendarEventPopupStartTimeZoneAllDayUnchecked"></span></p>
        <p><strong>@localizer["EndDate"].Value:</strong> <span id="otherCalendarEventPopupEndAllDayUnchecked"></span></p>
        <p><span id="otherCalendarEventPopupEndTimeZoneAllDayUnchecked"></span></p>
    </div>
    <div class="popup-footer">
        <button id="viewOtherCalendarEventPopup" class="btn btn-primary btn-sm">@localizer["View"].Value</button>
    </div>
</div>

@*<!--createCalendarDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="createCalendarDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="createCalendarTabs">
                @*<!--Tab Calendar-->*@
                <ul>
                    <li><a href="#createCalendarTabs-1">@localizer["Add Calendar"].Value</a></li>
                </ul>
                @*Tabs-1: Create Calendar Modal*@
                <div id="createCalendarTabs-1">
                    <form id="formCreateCalendar">
                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarName">@localizer["Name"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Name"].Value" id="createCalendarName" name="createCalendarName" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarName" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarDescription">@localizer["Description"].Value</label>
                                <textarea class="form-control form-control-sm" id="createCalendarDescription" name="createCalendarDescription" maxlength="16384"></textarea> @*maxlength: 16KB*@
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarHtmlColorCode">@localizer["Color"].Value</label>
                                <input class="form-control form-control-sm" type="color" data-val="true" data-val-required="@localizer["Please select Color"].Value" id="createCalendarHtmlColorCode" name="createCalendarHtmlColorCode" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarHtmlColorCode" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <label for="createCalendarTimeZone">@localizer["TimeZone"].Value</label>
                            <select id="createCalendarTimeZone" name="createCalendarTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                {
                                    string systemTimeZoneIanaId = string.Empty;

                                    if (systemTimeZone.HasIanaId)
                                    {
                                        systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                    }
                                    else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                    {
                                        systemTimeZoneIanaId = ianaId;  // use the converted ID
                                    }

                                    if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                        continue;

                                    if (!string.IsNullOrEmpty(loginedAccount.TimeZoneIanaId))
                                    {
                                        if (loginedAccount.TimeZoneIanaId == systemTimeZoneIanaId)
                                        {
                                            <option value="@systemTimeZoneIanaId" selected>@systemTimeZone.DisplayName</option>
                                        }
                                        else
                                        {
                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    }
                                    else
                                    {
                                        <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                    }
                                }
                            </select>
                            <br />
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                            <input type="submit" class="btn btn-primary" value="@localizer["Save"].Value" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!--editCalendarDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="editCalendarDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="editCalendarTabs">
                @*<!--Tab Calendar-->*@
                <ul>
                    <li><a href="#editCalendarTabs-1">@localizer["Edit Calendar"].Value</a></li>
                </ul>
                @*Tabs-1: Edit Calendar Modal*@
                <div id="editCalendarTabs-1">
                    <form id="formEditCalendar">
                        <input type="hidden" id="editCalendarId" />
                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarName">@localizer["Name"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Name"].Value" id="editCalendarName" name="editCalendarName" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarName" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarDescription">@localizer["Description"].Value</label>
                                <textarea class="form-control form-control-sm" id="editCalendarDescription" name="editCalendarDescription" maxlength="16384"></textarea> @*maxlength: 16KB*@
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarHtmlColorCode">@localizer["Color"].Value</label>
                                <input class="form-control form-control-sm" type="color" data-val="true" data-val-required="@localizer["Please select Color"].Value" id="editCalendarHtmlColorCode" name="editCalendarHtmlColorCode" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarHtmlColorCode" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <label for="editCalendarTimeZone">@localizer["TimeZone"].Value</label>
                            <select id="editCalendarTimeZone" name="editCalendarTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                {
                                    string systemTimeZoneIanaId = string.Empty;

                                    if (systemTimeZone.HasIanaId)
                                    {
                                        systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                    }
                                    else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                    {
                                        systemTimeZoneIanaId = ianaId;  // use the converted ID
                                    }

                                    if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                        continue;

                                    if (!string.IsNullOrEmpty(loginedAccount.TimeZoneIanaId))
                                    {
                                        if (loginedAccount.TimeZoneIanaId == systemTimeZoneIanaId)
                                        {
                                            <option value="@systemTimeZoneIanaId" selected>@systemTimeZone.DisplayName</option>
                                        }
                                        else
                                        {
                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    }
                                    else
                                    {
                                        <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                    }
                                }
                            </select>
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                            <input type="submit" class="btn btn-primary" value="@localizer["Save"].Value" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!--ConfirmDeleteCalendarDialogModal-->*@
<div class="modal" tabindex="-1" role="dialog" id="confirmDeleteCalendarDialogModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                @localizer["Are you sure to delete?"].Value
            </div>
            <div class="modal-footer">
                <button id="btnDeleteCalendar" type="button" class="btn btn-danger">@localizer["Delete"].Value</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
            </div>
        </div>
    </div>
</div>

@*<!--createCalendarEventTaskDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="createCalendarEventTaskDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="createCalendarEventTaskTabs">
                @*<!--Tab EventTask-->*@
                <ul>
                    <li><a href="#createCalendarEventTaskTabs-1">@localizer["Add Event"].Value</a></li>
                </ul>
                @*Tabs-1: Create Calendar Event Modal*@
                <div id="createCalendarEventTaskTabs-1">
                    <form id="formCreateCalendarEvent">
                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventName">@localizer["Name"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Name"].Value" id="createCalendarEventName" name="createCalendarEventName" value="" maxlength="100">
                                <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventName" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="createCalendarEventAllDay">@localizer["All day"].Value</label>
                                <input class="form-control form-control-sm" type="checkbox" id="createCalendarEventAllDay" name="createCalendarEventAllDay" />
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="createCalendarEventRepeatCycle">@localizer["Repeat cycle"].Value</label>
                                <br />
                                <select id="createCalendarEventRepeatCycle" name="createCalendarEventRepeatCycle" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                    <option value="DoesNotRepeat" select>@localizer["Does not repeat"].Value</option>
                                    @*
                                    <option value="Daily">@localizer["Daily"].Value</option>
                                    <option value="WeeklyOnMonday">@localizer["Weekly on Monday"].Value</option>
                                    <option value="MonthlyOnTheFirstMonday">@localizer["Monthly on the"].Value</option>
                                    <option value="AnnuallyOnJune3">@localizer["Annually on June 3"].Value</option>
                                    <option value="Custom...">@localizer["Custom..."].Value</option>
                                    *@
                                </select>
                            </div>
                        </div>
                        <div id="divCreateEventAllDayChecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayCheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="createCalendarEventAllDayCheckedStartDate" name="createCalendarEventAllDayCheckedStartDate" value="@(currentDate)" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventAllDayCheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayCheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="createCalendarEventAllDayCheckedEndDate" name="createCalendarEventAllDayCheckedEndDate" value="@(currentDate)" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventAllDayCheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                        <div id="divCreateEventAllDayUnchecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="createCalendarEventAllDayUncheckedStartDate" name="createCalendarEventAllDayUncheckedStartDate" value="@(currentDate)" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventAllDayUncheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedStartTime">@localizer["StartTime"].Value</label>
                                    <br />
                                    <select id="createCalendarEventAllDayUncheckedStartTime" name="createCalendarEventAllDayUncheckedStartTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (var time in timeIntervals)
                                        {
                                            if (time == currentInterval)
                                            {
                                                <option value="@time" selected>@time</option>
                                            }
                                            else
                                            {
                                                <option value="@time">@time</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="createCalendarEventAllDayUncheckedEndDate" name="createCalendarEventAllDayUncheckedEndDate" value="@(currentDate)" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventAllDayUncheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedEndTime">@localizer["EndTime"].Value</label>
                                    <br />
                                    <select id="createCalendarEventAllDayUncheckedEndTime" name="createCalendarEventAllDayUncheckedEndTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (var time in timeIntervals)
                                        {
                                            if (time == currentInterval)
                                            {
                                                <option value="@time" selected>@time</option>
                                            }
                                            else
                                            {
                                                <option value="@time">@time</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedStartTimeZone">@localizer["StartTimeZone"].Value</label>
                                    <select id="createCalendarEventAllDayUncheckedStartTimeZone" name="createCalendarEventAllDayUncheckedStartTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="createCalendarEventAllDayUncheckedEndTimeZone">@localizer["EndTimeZone"].Value</label>
                                    <select id="createCalendarEventAllDayUncheckedEndTimeZone" name="createCalendarEventAllDayUncheckedEndTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventLocation">@localizer["Location"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Location"].Value" id="createCalendarEventLocation" name="createCalendarEventLocation" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="createCalendarEventLocation" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventDescription">@localizer["Description"].Value</label>
                                <textarea class="form-control form-control-sm" id="createCalendarEventDescription" name="createCalendarEventDescription" maxlength="16384"></textarea> @*maxlength: 16KB*@
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventAttachment">@localizer["Attachment (Only zip extension allowed.)"].Value</label>
                                <br />
                                <input type="file" id="createCalendarEventAttachment" name="createCalendarEventAttachment" accept=".zip" data-errorMessage="@localizer["File size must be smaller than 10MB."].Value">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="createCalendarEventMyCalendar">@localizer["My Calendar"].Value</label>
                                <br />
                                <select id="createCalendarEventMyCalendar" name="createCalendarEventMyCalendar" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                    @foreach (Calendar calendar in Model.Calendars)
                                    {
                                        <option value="@calendar.Id">@calendar.Name</option>
                                    }
                                </select>
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="createCalendarEventStatus">@localizer["Status"].Value</label>
                                <br />
                                <select id="createCalendarEventStatus" name="createCalendarEventStatus" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                    <option value="Busy" select>@localizer["Busy"].Value</option>
                                    <option value="Free">@localizer["Free"].Value</option>
                                </select>
                            </div>
                        </div>

                        <div id="divCreateEventNotificationAllDayChecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventNotificationAllDayChecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divCreateEventNotificationAllDayCheckedRow">
                                    <select class='form-control-sm createCalendarEventSelNotificationMethodAllDayChecked' style='width:20%;text-overflow:ellipsis;'>
                                        <option value='Email'>@localizer["Email"].Value</option>
                                        <option value='Notification'>@localizer["Notification"].Value</option>
                                    </select>

                                    <input type='number' class='form-control-sm createCalendarEventSelNotificationNumberAllDayChecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="28">

                                    <select class='form-control-sm createCalendarEventSelNotificationTimeTypeAllDayChecked' style='width:30%;text-overflow:ellipsis;'>
                                        <option value='Days' selected>@localizer["days"].Value</option>
                                        <option value='Weeks'>@localizer["weeks"].Value</option>
                                    </select>
                                    <label style="padding-left:5px;padding-right:5px;">@localizer["before at"].Value</label>
                                    <select class='form-control-sm createCalendarEventSelNotificationTimeAllDayChecked' style='width:11%;text-overflow:ellipsis;'>
                                        @foreach (var time in timeIntervals)
                                        {
                                            if (time == "09:00") // Default time
                                            {
                                                <option value="@time" selected>@time</option>
                                            }
                                            else
                                            {
                                                <option value="@time">@time</option>
                                            }
                                        }
                                    </select>
                                    <a class='hover aCreateCalendarDeleteNotificationAllDayChecked' href='#' style='width:10%;'>
                                        <i class='fa fa-trash' aria-hidden='true' style='margin-left: 7px;'></i>
                                    </a>

                                    <br />
                                    <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@

                                <input style="margin-top:20px;" class="btn btn-primary" type="button" id="createCalendarEventNotificationAllDayChecked" name="createCalendarEventNotificationAllDayChecked" value="@localizer["Add notification"].Value">
                            </div>
                        </div>

                        <div id="divCreateEventNotificationAllDayUnchecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="createCalendarEventNotificationAllDayUnchecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divCreateEventNotificationAllDayUncheckedRow" style="padding-bottom:5px;">
                                    <select class='form-control-sm createCalendarEventSelNotificationMethodAllDayUnchecked' style='width:20%;text-overflow:ellipsis;'>
                                        <option value='Email'>@localizer["Email"].Value</option>
                                        <option value='Notification'>@localizer["Notification"].Value</option>
                                    </select>

                                    <input type='number' class='form-control-sm createCalendarEventSelNotificationNumberAllDayUnchecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="40320">

                                    <select class='form-control-sm createCalendarEventSelNotificationTimeTypeAllDayUnchecked' style='width:30%;text-overflow:ellipsis;'>
                                        <option value='Minutes' selected>@localizer["minutes"].Value</option>
                                        <option value='Hours'>@localizer["hours"].Value</option>
                                        <option value='Days'>@localizer["days"].Value</option>
                                        <option value='Weeks'>@localizer["weeks"].Value</option>
                                    </select>
                                    <a class='hover aCreateCalendarDeleteNotificationAllDayUnchecked' href='#' style='width:10%;'>
                                        <i class='fa fa-trash' aria-hidden='true' style='margin-left: 7px;'></i>
                                    </a>

                                    <br />
                                    <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@

                                <input style="margin-top:20px;" class="btn btn-primary" type="button" id="createCalendarEventNotificationAllDayUnchecked" name="createCalendarEventNotificationAllDayUnchecked" value="@localizer["Add notification"].Value">
                            </div>
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                            <input type="submit" class="btn btn-primary" value="@localizer["Save"].Value" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!--editCalendarEventTaskDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="editCalendarEventTaskDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="editCalendarEventTaskTabs">
                @*<!--Tab EventTask-->*@
                <ul>
                    <li><a href="#editCalendarEventTaskTabs-1">@localizer["Edit Event"].Value</a></li>
                </ul>
                @*Tabs-1: Edit Calendar Event Modal*@
                <div id="editCalendarEventTaskTabs-1">
                    <form id="formEditCalendarEvent">
                        <input type="hidden" id="editCalendarEventId" />
                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventName">@localizer["Name"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Name"].Value" id="editCalendarEventName" name="editCalendarEventName" value="" maxlength="100">
                                <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventName" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="editCalendarEventAllDay">@localizer["All day"].Value</label>
                                <input class="form-control form-control-sm" type="checkbox" id="editCalendarEventAllDay" name="editCalendarEventAllDay" />
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="editCalendarEventRepeatCycle">@localizer["Repeat cycle"].Value</label>
                                <br />
                                <select id="editCalendarEventRepeatCycle" name="editCalendarEventRepeatCycle" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                    <option value="DoesNotRepeat" select>@localizer["Does not repeat"].Value</option>
                                    @*
                                    <option value="Daily">@localizer["Daily"].Value</option>
                                    <option value="WeeklyOnMonday">@localizer["Weekly on Monday"].Value</option>
                                    <option value="MonthlyOnTheFirstMonday">@localizer["Monthly on the"].Value</option>
                                    <option value="AnnuallyOnJune3">@localizer["Annually on June 3"].Value</option>
                                    <option value="Custom...">@localizer["Custom..."].Value</option>
                                    *@
                                </select>
                            </div>
                        </div>
                        <div id="divEditEventAllDayChecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayCheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="editCalendarEventAllDayCheckedStartDate" name="editCalendarEventAllDayCheckedStartDate" value="" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventAllDayCheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayCheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="editCalendarEventAllDayCheckedEndDate" name="editCalendarEventAllDayCheckedEndDate" value="" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventAllDayCheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                        <div id="divEditEventAllDayUnchecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="editCalendarEventAllDayUncheckedStartDate" name="editCalendarEventAllDayUncheckedStartDate" value="" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventAllDayUncheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedStartTime">@localizer["StartTime"].Value</label>
                                    <br />
                                    <select id="editCalendarEventAllDayUncheckedStartTime" name="editCalendarEventAllDayUncheckedStartTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (var time in timeIntervals)
                                        {
                                            <option value="@time">@time</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="editCalendarEventAllDayUncheckedEndDate" name="editCalendarEventAllDayUncheckedEndDate" value="" readonly>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventAllDayUncheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedEndTime">@localizer["EndTime"].Value</label>
                                    <br />
                                    <select id="editCalendarEventAllDayUncheckedEndTime" name="editCalendarEventAllDayUncheckedEndTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (var time in timeIntervals)
                                        {
                                            <option value="@time">@time</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedStartTimeZone">@localizer["StartTimeZone"].Value</label>
                                    <select id="editCalendarEventAllDayUncheckedStartTimeZone" name="editCalendarEventAllDayUncheckedStartTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="editCalendarEventAllDayUncheckedEndTimeZone">@localizer["EndTimeZone"].Value</label>
                                    <select id="editCalendarEventAllDayUncheckedEndTimeZone" name="editCalendarEventAllDayUncheckedEndTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventLocation">@localizer["Location"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Location"].Value" id="editCalendarEventLocation" name="editCalendarEventLocation" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="editCalendarEventLocation" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventDescription">@localizer["Description"].Value</label>
                                <textarea class="form-control form-control-sm" id="editCalendarEventDescription" name="editCalendarEventDescription" maxlength="16384"></textarea> @*maxlength: 16KB*@
                            </div>
                        </div>

                        <div id="divEditCalendarEventAttachedFile" class="form-row" style="display:none;">
                            <ul class="mailbox-attachments d-flex align-items-stretch clearfix">
                                <li>
                                    <span class="mailbox-attachment-icon"><i class="far fa-file"></i></span>

                                    <div class="mailbox-attachment-info">
                                        <a id="aEditCalendarEventAttachedFile" href="#" class="mailbox-attachment-name"><i class="fas fa-paperclip"></i></a>
                                        <span class="mailbox-attachment-size clearfix mt-1">
                                            <span id="spanEditCalendarEventAttachedFile">
                                            </span>
                                        </span>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventAttachment">@localizer["Attachment (Only zip extension allowed.)"].Value</label>
                                <br />
                                <input type="file" id="editCalendarEventAttachment" name="editCalendarEventAttachment" accept=".zip" data-errorMessage="@localizer["File size must be smaller than 10MB."].Value">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="editCalendarEventMyCalendar">@localizer["My Calendar"].Value</label>
                                <br />
                                <select id="editCalendarEventMyCalendar" name="editCalendarEventMyCalendar" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;"></select>
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="editCalendarEventStatus">@localizer["Status"].Value</label>
                                <br />
                                <select id="editCalendarEventStatus" name="editCalendarEventStatus" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;">
                                    <option value="Busy" select>@localizer["Busy"].Value</option>
                                    <option value="Free">@localizer["Free"].Value</option>
                                </select>
                            </div>
                        </div>

                        <div id="divEditEventNotificationAllDayChecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventNotificationAllDayChecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divEditEventNotificationAllDayCheckedRow">
                                <select class='form-control-sm editCalendarEventSelNotificationMethodAllDayChecked' style='width:20%;text-overflow:ellipsis;'>
                                <option value='Email'>@localizer["Email"].Value</option>
                                <option value='Notification'>@localizer["Notification"].Value</option>
                                </select>

                                <input type='number' class='form-control-sm editCalendarEventSelNotificationNumberAllDayChecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="28">

                                <select class='form-control-sm editCalendarEventSelNotificationTimeTypeAllDayChecked' style='width:30%;text-overflow:ellipsis;'>
                                <option value='Days' selected>@localizer["days"].Value</option>
                                <option value='Weeks'>@localizer["weeks"].Value</option>
                                </select>
                                <label style="padding-left:5px;padding-right:5px;">@localizer["before at"].Value</label>
                                <select class='form-control-sm editCalendarEventSelNotificationTimeAllDayChecked' style='width:11%;text-overflow:ellipsis;'>
                                @foreach (var time in timeIntervals)
                                {
                                if (time == "09:00") // Default time
                                {
                                <option value="@time" selected>@time</option>
                                }
                                else
                                {
                                <option value="@time">@time</option>
                                }
                                }
                                </select>
                                <a class='hover aEditCalendarDeleteNotificationAllDayChecked' href='#' style='width:10%;'>
                                <i class='fa fa-trash' aria-hidden='true' style='margin-left: 7px;'></i>
                                </a>

                                <br />
                                <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@

                                <input style="margin-top:20px;" class="btn btn-primary" type="button" id="editCalendarEventNotificationAllDayChecked" name="editCalendarEventNotificationAllDayChecked" value="@localizer["Add notification"].Value">
                            </div>
                        </div>

                        <div id="divEditEventNotificationAllDayUnchecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="editCalendarEventNotificationAllDayUnchecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divEditEventNotificationAllDayUncheckedRow" style="padding-bottom:5px;">
                                <select class='form-control-sm editCalendarEventSelNotificationMethodAllDayUnchecked' style='width:20%;text-overflow:ellipsis;'>
                                <option value='Email'>@localizer["Email"].Value</option>
                                <option value='Notification'>@localizer["Notification"].Value</option>
                                </select>

                                <input type='number' class='form-control-sm editCalendarEventSelNotificationNumberAllDayUnchecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="40320">

                                <select class='form-control-sm editCalendarEventSelNotificationTimeTypeAllDayUnchecked' style='width:30%;text-overflow:ellipsis;'>
                                <option value='Minutes' selected>@localizer["minutes"].Value</option>
                                <option value='Hours'>@localizer["hours"].Value</option>
                                <option value='Days'>@localizer["days"].Value</option>
                                <option value='Weeks'>@localizer["weeks"].Value</option>
                                </select>
                                <a class='hover aEditCalendarDeleteNotificationAllDayUnchecked' href='#' style='width:10%;'>
                                <i class='fa fa-trash' aria-hidden='true' style='margin-left: 7px;'></i>
                                </a>

                                <br />
                                <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@

                                <input style="margin-top:20px;" class="btn btn-primary" type="button" id="editCalendarEventNotificationAllDayUnchecked" name="editCalendarEventNotificationAllDayUnchecked" value="@localizer["Add notification"].Value">
                            </div>
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                            <input type="submit" class="btn btn-primary" value="@localizer["Save"].Value" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!--viewCalendarEventTaskDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="viewCalendarEventTaskDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="viewCalendarEventTaskTabs">
                @*<!--Tab EventTask-->*@
                <ul>
                    <li><a href="#viewCalendarEventTaskTabs-1">@localizer["View Event"].Value</a></li>
                </ul>
                @*Tabs-1: View Calendar Event Modal*@
                <div id="viewCalendarEventTaskTabs-1">
                    <form id="formViewCalendarEvent">
                        <input type="hidden" id="viewCalendarEventId" />
                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="viewCalendarEventName">@localizer["Name"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Name"].Value" id="viewCalendarEventName" name="viewCalendarEventName" value="" maxlength="100" disabled/>
                                <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventName" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="viewCalendarEventAllDay">@localizer["All day"].Value</label>
                                <input class="form-control form-control-sm" type="checkbox" id="viewCalendarEventAllDay" name="viewCalendarEventAllDay" disabled/>
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="viewCalendarEventRepeatCycle">@localizer["Repeat cycle"].Value</label>
                                <br />
                                <select id="viewCalendarEventRepeatCycle" name="viewCalendarEventRepeatCycle" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                    <option value="DoesNotRepeat" select>@localizer["Does not repeat"].Value</option>
                                    @*
                                    <option value="Daily">@localizer["Daily"].Value</option>
                                    <option value="WeeklyOnMonday">@localizer["Weekly on Monday"].Value</option>
                                    <option value="MonthlyOnTheFirstMonday">@localizer["Monthly on the"].Value</option>
                                    <option value="AnnuallyOnJune3">@localizer["Annually on June 3"].Value</option>
                                    <option value="Custom...">@localizer["Custom..."].Value</option>
                                    *@
                                </select>
                            </div>
                        </div>
                        <div id="divViewEventAllDayChecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayCheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="viewCalendarEventAllDayCheckedStartDate" name="viewCalendarEventAllDayCheckedStartDate" value="" readonly disabled>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventAllDayCheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayCheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="viewCalendarEventAllDayCheckedEndDate" name="viewCalendarEventAllDayCheckedEndDate" value="" readonly disabled>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventAllDayCheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                        <div id="divViewEventAllDayUnchecked">
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedStartDate">@localizer["StartDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter StartDate"].Value" id="viewCalendarEventAllDayUncheckedStartDate" name="viewCalendarEventAllDayUncheckedStartDate" value="" readonly disabled>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventAllDayUncheckedStartDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedStartTime">@localizer["StartTime"].Value</label>
                                    <br />
                                    <select id="viewCalendarEventAllDayUncheckedStartTime" name="viewCalendarEventAllDayUncheckedStartTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                        @foreach (var time in timeIntervals)
                                        {
                                            <option value="@time">@time</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedEndDate">@localizer["EndDate"].Value</label>
                                    <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter EndDate"].Value" id="viewCalendarEventAllDayUncheckedEndDate" name="viewCalendarEventAllDayUncheckedEndDate" value="" readonly disabled>
                                    <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventAllDayUncheckedEndDate" data-valmsg-replace="true"></span>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedEndTime">@localizer["EndTime"].Value</label>
                                    <br />
                                    <select id="viewCalendarEventAllDayUncheckedEndTime" name="viewCalendarEventAllDayUncheckedEndTime" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                        @foreach (var time in timeIntervals)
                                        {
                                            <option value="@time">@time</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedStartTimeZone">@localizer["StartTimeZone"].Value</label>
                                    <select id="viewCalendarEventAllDayUncheckedStartTimeZone" name="viewCalendarEventAllDayUncheckedStartTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                                <div class="form-group col-md-6 mb-3">
                                    <label for="viewCalendarEventAllDayUncheckedEndTimeZone">@localizer["EndTimeZone"].Value</label>
                                    <select id="viewCalendarEventAllDayUncheckedEndTimeZone" name="viewCalendarEventAllDayUncheckedEndTimeZone" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                        @foreach (TimeZoneInfo systemTimeZone in TimeZoneInfo.GetSystemTimeZones())
                                        {
                                            string systemTimeZoneIanaId = string.Empty;

                                            if (systemTimeZone.HasIanaId)
                                            {
                                                systemTimeZoneIanaId = systemTimeZone.Id;  // no conversion necessary
                                            }
                                            else if (TimeZoneInfo.TryConvertWindowsIdToIanaId(systemTimeZone.Id, out string ianaId))
                                            {
                                                systemTimeZoneIanaId = ianaId;  // use the converted ID
                                            }

                                            if (string.IsNullOrEmpty(systemTimeZoneIanaId))
                                                continue;

                                            <option value="@systemTimeZoneIanaId">@systemTimeZone.DisplayName</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="viewCalendarEventLocation">@localizer["Location"].Value</label>
                                <input class="form-control form-control-sm" type="text" data-val="true" data-val-required="@localizer["Please enter Location"].Value" id="viewCalendarEventLocation" name="viewCalendarEventLocation" value="" disabled>
                                <span class="field-validation-valid text-danger" data-valmsg-for="viewCalendarEventLocation" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="viewCalendarEventDescription">@localizer["Description"].Value</label>
                                <textarea class="form-control form-control-sm" id="viewCalendarEventDescription" name="viewCalendarEventDescription" maxlength="16384" disabled></textarea> @*maxlength: 16KB*@
                            </div>
                        </div>

                        <div id="divViewCalendarEventAttachedFile" class="form-row" style="display:none;">
                            <ul class="mailbox-attachments d-flex align-items-stretch clearfix">
                                <li>
                                    <span class="mailbox-attachment-icon"><i class="far fa-file"></i></span>

                                    <div class="mailbox-attachment-info">
                                        <a id="aViewCalendarEventAttachedFile" href="#" class="mailbox-attachment-name"><i class="fas fa-paperclip"></i></a>
                                        <span class="mailbox-attachment-size clearfix mt-1">
                                            <span id="spanViewCalendarEventAttachedFile">
                                            </span>
                                        </span>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="viewCalendarEventMyCalendar">@localizer["My Calendar"].Value</label>
                                <br />
                                <select id="viewCalendarEventMyCalendar" name="viewCalendarEventMyCalendar" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled></select>
                            </div>
                            <div class="form-group col-md-6 mb-3">
                                <label for="viewCalendarEventStatus">@localizer["Status"].Value</label>
                                <br />
                                <select id="viewCalendarEventStatus" name="viewCalendarEventStatus" class="form-control form-control-sm" style="max-width:100%;text-overflow:ellipsis;" disabled>
                                    <option value="Busy" select>@localizer["Busy"].Value</option>
                                    <option value="Free">@localizer["Free"].Value</option>
                                </select>
                            </div>
                        </div>

                        <div id="divViewEventNotificationAllDayChecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="viewCalendarEventNotificationAllDayChecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divViewEventNotificationAllDayCheckedRow">
                                <select class='form-control-sm viewCalendarEventSelNotificationMethodAllDayChecked' style='width:20%;text-overflow:ellipsis;' disabled>
                                <option value='Email'>@localizer["Email"].Value</option>
                                <option value='Notification'>@localizer["Notification"].Value</option>
                                </select>

                                <input type='number' class='form-control-sm viewCalendarEventSelNotificationNumberAllDayChecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="28" disabled>

                                <select class='form-control-sm viewCalendarEventSelNotificationTimeTypeAllDayChecked' style='width:30%;text-overflow:ellipsis;' disabled>
                                <option value='Days' selected>@localizer["days"].Value</option>
                                <option value='Weeks'>@localizer["weeks"].Value</option>
                                </select>
                                <label style="padding-left:5px;padding-right:5px;">@localizer["before at"].Value</label>
                                <select class='form-control-sm viewCalendarEventSelNotificationTimeAllDayChecked' style='width:11%;text-overflow:ellipsis;' disabled>
                                @foreach (var time in timeIntervals)
                                {
                                if (time == "09:00") // Default time
                                {
                                <option value="@time" selected>@time</option>
                                }
                                else
                                {
                                <option value="@time">@time</option>
                                }
                                }
                                </select>

                                <br />
                                <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@

                                <input style="margin-top:20px; display:none;" class="btn btn-primary" type="button" id="viewCalendarEventNotificationAllDayChecked" name="viewCalendarEventNotificationAllDayChecked" value="">
                            </div>
                        </div>

                        <div id="divViewEventNotificationAllDayUnchecked" class="form-row" style="display:none;">
                            <div class="form-group col-md-12 mb-3">
                                <label for="viewCalendarEventNotificationAllDayUnchecked">@localizer["Notification"].Value</label>
                                <br />

                                @*
                                <div class="divViewEventNotificationAllDayUncheckedRow" style="padding-bottom:5px;">
                                <select class='form-control-sm viewCalendarEventSelNotificationMethodAllDayUnchecked' style='width:20%;text-overflow:ellipsis;' disabled>
                                <option value='Email'>@localizer["Email"].Value</option>
                                <option value='Notification'>@localizer["Notification"].Value</option>
                                </select>

                                <input type='number' class='form-control-sm viewCalendarEventSelNotificationNumberAllDayUnchecked' style='width:30%;text-overflow:ellipsis; background-color:#343a40; color:#fff; border-color:#6c757d;' min="0" max="40320" disabled>

                                <select class='form-control-sm viewCalendarEventSelNotificationTimeTypeAllDayUnchecked' style='width:30%;text-overflow:ellipsis;' disabled>
                                <option value='Minutes' selected>@localizer["minutes"].Value</option>
                                <option value='Hours'>@localizer["hours"].Value</option>
                                <option value='Days'>@localizer["days"].Value</option>
                                <option value='Weeks'>@localizer["weeks"].Value</option>
                                </select>

                                <br />
                                <div class="error-message" style="color: red; font-size: 0.9em; display: none;"></div>

                                </div>
                                *@
                                <input style="margin-top:20px; display:none;" class="btn btn-primary" type="button" id="viewCalendarEventNotificationAllDayUnchecked" name="viewCalendarEventNotificationAllDayUnchecked" value="">
                            </div>
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@*<!--browseCalendarsOfInterestDialogModal-->*@
<div class="modal fade" tabindex="-1" role="dialog" id="browseCalendarsOfInterestDialogModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div id="browseCalendarsOfInterestTabs">
                @*<!--Tab CalendarsOfInterest-->*@
                <ul>
                    <li><a href="#browseCalendarsOfInterestTabs-1">@localizer["Browse calendars of interest"].Value</a></li>
                </ul>
                @*Tabs-1: Browse calendars of interest Modal*@
                <div id="browseCalendarsOfInterestTabs-1">
                    <form id="formUpdateBrowseCalendarsOfInterest">

                        <div class="form-row">
                            <div class="form-group col-md-3 mb-3 text-center">
                                <input id="allCheckBrowseCalendarsOfInterest" class="form-control form-control-sm" type="checkbox" />
                            </div>
                            <div class="form-group col-md-9 mb-9 text-center">
                                <label style="word-break: break-all;">@localizer["Name"].Value</label>
                            </div>
                        </div>

                        <div id="divBrowseCalendarsOfInterest">
                            @*
                            <div class="form-row browseCalendarsOfInterest" style="margin-top: 20px;">
                                <div id="divBrowseCalendarsOfInterest1" class="form-group col-md-3 mb-3 text-center">
                                    <input class="form-control form-control-sm checkBoxBrowseCalendarsOfInterest" type="checkbox" />
                                </div>
                                <div class="form-group col-md-9 mb-9 text-center">
                                    <label style="word-break: break-all;">대한민국 공휴일</label>
                                </div>
                            </div>

                            <div class="form-row browseCalendarsOfInterest" style="margin-top: 20px;">
                                <div id="divBrowseCalendarsOfInterest2" class="form-group col-md-3 mb-3 text-center">
                                    <input class="form-control form-control-sm checkBoxBrowseCalendarsOfInterest" type="checkbox" />
                                </div>
                                <div class="form-group col-md-9 mb-9 text-center">
                                    <label style="word-break: break-all;">중국 공휴일</label>
                                </div>
                            </div>
                            *@
                        </div>

                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@localizer["Close"].Value</button>
                            <input type="submit" class="btn btn-primary" value="@localizer["Save"].Value" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/anonymous/custom/Calendar/AnonymousIndex/css/site.css" asp-append-version="true">
}

@section Scripts {
    <script src="~/anonymous/custom/Calendar/AnonymousIndex/js/site.js" asp-append-version="true"></script>
}